import json
import web3
from web3 import Web3
from solc import compile_standard

if __name__ == "__main__":
    # compiled_sol = compile_standard({
    #     "language": "Solidity",
    #     "sources": {
    #         "PSO.sol": {
    #             "content":'''
            #         pragma solidity >= 0.5.2;
            #         contract PSO_1 {

            #             event Particle(int LR,int Epoch,int batch,int Layer,int Width,uint counter);
            #             int public ALL_Best_LR ;
            #             int public ALL_Best_Epoch ;
            #             int public ALL_Best_Batch ;
            #             int public ALL_Best_Layer ;
            #             int public ALL_Best_Width ;
            #             int public ALL_Best_Accuracy ;

            #             int[] private P_Best_LR =  new int[](10) ;
            #             int[] private P_Best_Epoch = new int[](10);
            #             int[] private P_Best_Batch = new int[](10);
            #             int[] private P_Best_Layer = new int[](10);
            #             int[] private P_Best_Width = new int[](10);
            #             int[] private P_Best_Accuracy = new int[](10);

            #             int[] private LR = new int[](10);
            #             int[] private Epoch = new int[](10);
            #             int[] private Batch = new int[](10);
            #             int[] private Layer = new int[](10);
            #             int[] private Width = new int[](10);
            #             int[] private Accuracy = new int[](10);
                        
            #             int[] private LR_v = new int[](10);
            #             int[] private Epoch_v = new int[](10);
            #             int[] private Batch_v = new int[](10);
            #             int[] private Layer_v = new int[](10);
            #             int[] private Width_v = new int[](10);
            #             int[] private Accuracy_v = new int[](10);

            #             int[] private CHECK =  new int[](10) ;
            #             int constant LR_max = 10000;
            #             int constant LR_min = 1000;
            #             int constant Epoch_max = 100;
            #             int constant Epoch_min = 50;
            #             int constant Batch_max = 60;
            #             int constant Batch_min = 20;
            #             int constant Layer_max = 50;
            #             int constant Layer_min = 10;
            #             int constant Width_max = 60;
            #             int constant Width_min = 30;

            #             uint public ITER = 0;
            #             uint public counter  = 0; 


            #             function set_accuracy(int acc,uint ind) public {
            #                 Accuracy[ind] = acc ;
            #                 CHECK[ind] = 1;
            #             }

            #              function end_of_contract() view public returns (bool){
            #                 return ITER >= 100 ;
            #             }

            #             function get()  public {
            #                 if(ITER == 0)
            #                 {
            #                     RANDOM_INI();
            #                     emit Particle(LR[counter-1],Epoch[counter-1],Batch[counter-1],Layer[counter-1],Width[counter-1],counter-1);
            #                     counter ++;
            #                     ITER++;
            #                 }    
            #                 else if(ITER < 100)
            #                 {
                                
            #                     if(counter == 10 )
            #                     {
            #                         int  sum = 0;
            #                         for(uint i = 0;i<10;i++)
            #                         {
            #                             sum += CHECK[i];
            #                         }

            #                         if(sum == 10)
            #                         {
            #                             Evaluate();
            #                             Update_Velocity();
            #                             Update_Position();
            #                             counter = 0;
            #                             ITER++;

            #                               for(uint j = 0;j<10;j++)
            #                                 {
            #                                     CHECK[j] = 0;
            #                                 }
            #                         }
                            
            #                     }
            #                     else{
            #                         emit Particle(LR[counter-1],Epoch[counter-1],Batch[counter-1],Layer[counter-1],Width[counter-1],counter-1);
            #                         counter ++;
            #                     }

            #                 }
                            

                        
            #         }
            #             function RANDOM_INI() public{
            #                 for(uint i = 0 ; i < 10 ; i++)
            #                 {
            #                     //random x 
            #                     CHECK[i] = -1;

            #                     LR[i] = int(int(keccak256(block.timestamp, block.difficulty))%9000)+1000;

            #                     Epoch[i] = int(int(keccak256(block.timestamp, block.difficulty))%50)+50;

            #                     Batch[i] = int(int(keccak256(block.timestamp, block.difficulty))%40)+20;

            #                     Layer[i] = int(int(keccak256( block.timestamp , block.difficulty))%40)+10;

            #                     Width[i] = int(int(keccak256(block.timestamp, block.difficulty)) % 30) + 30;



            #                     //random vector
            #                     LR_v[i] = int(int(keccak256(block.timestamp, block.difficulty))%1998)-999;

            #                     Epoch_v[i] = int(int(keccak256(block.timestamp, block.difficulty))%10)-5;

            #                     Batch_v[i] = int(int(keccak256(block.timestamp, block.difficulty))%8)-4;

            #                     Layer_v[i] = int(int(keccak256(block.timestamp, block.difficulty))%8)-4;

            #                     Width_v[i] = int(int(keccak256(block.timestamp, block.difficulty))%6)-3;
            #                 }
                            
            #             }
            #             function Update_Velocity() public
            #             {
            #                 for(uint i = 0;i < 10;i++)
            #                 {
            #                     int[5] memory w;
            #                     int[5] memory c1;
            #                     int[5] memory c2;
            #                     for(uint j = 0;j < 5;j++)
            #                     {
            #                         if( j==0 )
            #                         {
            #                             w[j]= 8000;
            #                             c1[j] = int(int(keccak256(block.timestamp, block.difficulty))%4);
            #                             c2[j] = int(int(keccak256(block.timestamp, block.difficulty))%4);


            #                         }
            #                         else{
            #                             w[j] = 80;
            #                             c1[j] = int(int(keccak256(block.timestamp, block.difficulty))%4);
            #                             c2[j] = int(int(keccak256(block.timestamp, block.difficulty))%4);
            #                         }
            #                     }

            #                     LR_v[i] = LR_v[i] * w[0] + c1[0] * (P_Best_LR[i] - LR_v[i] ) + c2[0] * (ALL_Best_LR - LR_v[i]);
            #                     Epoch_v[i] = Epoch_v[i]*w[1] + c1[1] * (P_Best_LR[i] - Epoch_v[i]) + c2[1] * (ALL_Best_Epoch - Epoch_v[i]);
            #                     Batch_v[i] = Batch_v[i]*w[2] + c1[2] * (P_Best_Batch[i] - Batch_v[i]) + c2[2] * (ALL_Best_Batch - Batch_v[i]);
            #                     Layer_v[i] = Layer_v[i]*w[3] + c1[3]*(P_Best_Layer[i] - Layer_v[i]) + c2[3]*(ALL_Best_Layer - Layer_v[i]);
            #                     Width_v[i] = Width_v[i]*w[4] + c1[4]*(P_Best_Width[i] - Width_v[i]) + c2[4]*(ALL_Best_Width - Width_v[i]);
            #                 }

            #                 // Test_random =  mulDiv (uint x, uint y, uint z)

            #             }
            #             function Update_Position() public
            #             {
            #                 for(uint i = 0;i < 10;i++)
            #                 {
            #                     LR[i] = LR[i] + LR_v[i];
            #                     Epoch[i] = Epoch[i] + Epoch_v[i]; 
            #                     Batch[i] = Batch[i] + Batch_v[i];
            #                     Layer[i] = Layer[i] + Layer_v[i];
            #                     Width[i] = Width[i] + Width_v[i];
            #                 }
            #             }
            #             function Evaluate() public
            #             {
            #                 INRANGE();
            #                 for(uint i = 0;i < 10;i++)
            #                 {
            #                     if(Accuracy[i] > P_Best_Accuracy[i])
            #                     {
            #                         P_Best_Accuracy[i] = Accuracy[i];
            #                         P_Best_LR[i] = LR[i];
            #                         P_Best_Epoch[i] = Epoch[i];
            #                         P_Best_Batch[i] = Batch[i];
            #                         P_Best_Layer[i] = Layer[i];
            #                         P_Best_Width[i] = Width[i];
            #                         P_Best_Accuracy[i] = Accuracy[i];

            #                         if( P_Best_Accuracy[i] > ALL_Best_Accuracy )
            #                         {
            #                             ALL_Best_Accuracy = P_Best_Accuracy[i];
            #                             ALL_Best_LR = P_Best_LR[i];
            #                             ALL_Best_Epoch = P_Best_Epoch[i];
            #                             ALL_Best_Batch = P_Best_Batch[i];
            #                             ALL_Best_Layer = P_Best_Layer[i];
            #                             ALL_Best_Width = P_Best_Width[i];
            #                         }
            #                     }
            #                 }
            #             }
            #             function INRANGE() private
            #             {
            #                 for(uint i = 0;i < 10;i++)
            #                 {
            #                     if(LR[i] > LR_max )
            #                     {
            #                         LR[i] = LR_max;
            #                     }
            #                     else if( LR[i] < LR_min )
            #                     {               
            #                         LR[i] = LR_min;
            #                     }
                                
            #                     if(Epoch[i] > Epoch_max)
            #                     {
            #                         Epoch[i] = Epoch_max;
            #                     }
            #                     else if (Epoch[i] < Epoch_min)
            #                     {
            #                         Epoch[i] = Epoch_min;
            #                     }
            #                     if(Batch[i] > Batch_max)
            #                     {
            #                         Batch[i] = Batch_max;
            #                     }
            #                     else if(Batch[i] < Batch_min)
            #                     {
            #                         Batch[i] = Batch_min;
            #                     }
            #                     if(Layer[i] > Layer_max)
            #                     {
            #                         Layer[i] = Layer_max;
            #                     }
            #                     else if (Layer[i] < Layer_min)
            #                     {
            #                         Layer[i] = Layer_min;
            #                     }
            #                     if(Width[i] > Width_max)
            #                     {
            #                         Width[i] = Width_max;
            #                     }
            #                     else if(Width[i] < Width_min)
            #                     {
            #                         Width[i] = Width_min;
            #                     }


            #                 }
                            
            #             }



            #             // function mulDiv ()public pure returns (uint)
            #             // {  
                            
            #             //     uint w = 8000;
                            
            #             //     uint c1 = uint8(uint256(keccak256(block.timestamp, block.difficulty))%40000);

            #             //     uint c2 = uint8(uint256(keccak256(block.timestamp, block.difficulty))%40000);

                            
            #             //     return x * y / z;
                        
            #             // }

            #         }
            #         '''
            # }
        
    #     },
    #     "settings":
    #         {
    #             "outputSelection": {
    #                 "*": {
    #                     "*": [
    #                         "metadata", "evm.bytecode"
    #                         , "evm.bytecode.sourceMap"
    #                     ]
    #                 }
    #             }
    #         }
    # })

    w3 = Web3(Web3.IPCProvider('./tzuchieh_node1/geth.ipc'))
    w3.eth.default_account = w3.eth.accounts[0]
    print(w3.geth.personal.unlock_account(w3.eth.default_account, 'rx0899'))

    # compile contracy and get the function abi
    bytecode = "0x60606040526006604051805910620000145750595b908082528060200260200182016040525060069080516200003a9291602001906200046c565b50600a6040518059106200004b5750595b90808252806020026020018201604052506007908051620000719291602001906200046c565b50600a604051805910620000825750595b90808252806020026020018201604052506008908051620000a89291602001906200046c565b50600a604051805910620000b95750595b90808252806020026020018201604052506009908051620000df9291602001906200046c565b50600a604051805910620000f05750595b9080825280602002602001820160405250600a908051620001169291602001906200046c565b50600a604051805910620001275750595b9080825280602002602001820160405250600b9080516200014d9291602001906200046c565b50600a6040518059106200015e5750595b9080825280602002602001820160405250600c908051620001849291602001906200046c565b50600a604051805910620001955750595b9080825280602002602001820160405250600d908051620001bb9291602001906200046c565b50600a604051805910620001cc5750595b9080825280602002602001820160405250600e908051620001f29291602001906200046c565b50600a604051805910620002035750595b9080825280602002602001820160405250600f908051620002299291602001906200046c565b50600a6040518059106200023a5750595b90808252806020026020018201604052506010908051620002609291602001906200046c565b50600a604051805910620002715750595b90808252806020026020018201604052506011908051620002979291602001906200046c565b50600a604051805910620002a85750595b90808252806020026020018201604052506012908051620002ce9291602001906200046c565b50600a604051805910620002df5750595b90808252806020026020018201604052506013908051620003059291602001906200046c565b50600a604051805910620003165750595b908082528060200260200182016040525060149080516200033c9291602001906200046c565b50600a6040518059106200034d5750595b90808252806020026020018201604052506015908051620003739291602001906200046c565b50600a604051805910620003845750595b90808252806020026020018201604052506016908051620003aa9291602001906200046c565b50600a604051805910620003bb5750595b90808252806020026020018201604052506017908051620003e19291602001906200046c565b50600a604051805910620003f25750595b90808252806020026020018201604052506018908051620004189291602001906200046c565b50600a604051805910620004295750595b908082528060200260200182016040525060199080516200044f9291602001906200046c565b506000601a556000601b5534156200046657600080fd5b620004dc565b828054828255906000526020600020908101928215620004aa579160200282015b82811115620004aa5782518255916020019190600101906200048d565b50620004b8929150620004bc565b5090565b620004d991905b80821115620004b85760008155600101620004c3565b90565b6117df80620004ec6000396000f3006060604052600436106100e55763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631a7ef8dd81146100ea5780631c4c02091461010f57806330292f081461012457806335a47e0e1461013757806339446a6f146101505780633f11889f1461017757806361bc221a1461018a57806368c822ba1461019d5780636d4ce63c146101b05780637b736f04146101c357806396ad2d27146101d65780639fd15b33146101e9578063b1e990ce146101fc578063c3dd43f41461020f578063ccf0f4dd14610222578063d27c1f9914610235575b600080fd5b34156100f557600080fd5b6100fd61024b565b60405190815260200160405180910390f35b341561011a57600080fd5b610122610251565b005b341561012f57600080fd5b6100fd6104f1565b341561014257600080fd5b6101226004356024356104f7565b341561015b57600080fd5b610163610535565b604051901515815260200160405180910390f35b341561018257600080fd5b610122610540565b341561019557600080fd5b6100fd6109ea565b34156101a857600080fd5b6101226109f0565b34156101bb57600080fd5b610122610cd6565b34156101ce57600080fd5b6100fd6112f0565b34156101e157600080fd5b6100fd6112f6565b34156101f457600080fd5b6100fd6112fc565b341561020757600080fd5b6100fd611302565b341561021a57600080fd5b6100fd611308565b341561022d57600080fd5b61012261130e565b341561024057600080fd5b6100fd6004356114b7565b60045481565b600061025b6114d6565b5060005b600a8110156104ee57600c80548290811061027657fe5b90600052602060002090015460128281548110151561029157fe5b90600052602060002090015413156104e65760128054829081106102b157fe5b906000526020600020900154600c828154811015156102cc57fe5b600091825260209091200155600d8054829081106102e657fe5b90600052602060002090015460078281548110151561030157fe5b600091825260209091200155600e80548290811061031b57fe5b90600052602060002090015460088281548110151561033657fe5b600091825260209091200155600f80548290811061035057fe5b90600052602060002090015460098281548110151561036b57fe5b600091825260209091200155601080548290811061038557fe5b906000526020600020900154600a828154811015156103a057fe5b60009182526020909120015560118054829081106103ba57fe5b906000526020600020900154600b828154811015156103d557fe5b60009182526020909120015560128054829081106103ef57fe5b906000526020600020900154600c8281548110151561040a57fe5b600091825260209091200155600554600c80548390811061042757fe5b90600052602060002090015413156104e657600c80548290811061044757fe5b600091825260209091200154600555600780548290811061046457fe5b60009182526020822001549055600880548290811061047f57fe5b600091825260209091200154600155600980548290811061049c57fe5b600091825260209091200154600255600a8054829081106104b957fe5b600091825260209091200154600355600b8054829081106104d657fe5b6000918252602090912001546004555b60010161025f565b50565b60055481565b8160128281548110151561050757fe5b60009182526020909120015560198054600191908390811061052557fe5b6000918252602090912001555050565b601a54606490101590565b600061054a61178c565b61055261178c565b61055a61178c565b60008094505b600a8510156109e3575060005b600581101561068e5780151561060457611f4084826005811061058c57fe5b6020020152600442446040519182526020820152604090810190519081900390208115156105b657fe5b078382600581106105c357fe5b6020020152600442446040519182526020820152604090810190519081900390208115156105ed57fe5b078282600581106105fa57fe5b6020020152610686565b605084826005811061061257fe5b60200201526004424460405191825260208201526040908101905190819003902081151561063c57fe5b0783826005811061064957fe5b60200201526004424460405191825260208201526040908101905190819003902081151561067357fe5b0782826005811061068057fe5b60200201525b60010161056d565b601380548690811061069c57fe5b60009182526020822001549054038251026013868154811015156106bc57fe5b9060005260206000209001546007878154811015156106d757fe5b60009182526020909120015403845102855160138054899081106106f757fe5b90600052602060002090015402010160138681548110151561071557fe5b600091825260209091200155601480548690811061072f57fe5b9060005260206000209001546001540382600160058110151561074e57fe5b60200201510260148681548110151561076357fe5b90600052602060002090015460078781548110151561077e57fe5b60009182526020909120015403846001602002015102602086015160148054899081106107a757fe5b9060005260206000209001540201016014868154811015156107c557fe5b60009182526020909120015560158054869081106107df57fe5b906000526020600020900154600254038260026005811015156107fe57fe5b60200201510260158681548110151561081357fe5b90600052602060002090015460098781548110151561082e57fe5b600091825260209091200154036040850151026040860151601580548990811061085457fe5b90600052602060002090015402010160158681548110151561087257fe5b600091825260209091200155601680548690811061088c57fe5b906000526020600020900154600354038260036005811015156108ab57fe5b6020020151026016868154811015156108c057fe5b906000526020600020900154600a878154811015156108db57fe5b600091825260209091200154036060850151026060860151601680548990811061090157fe5b90600052602060002090015402010160168681548110151561091f57fe5b600091825260209091200155601780548690811061093957fe5b9060005260206000209001546004540382600460058110151561095857fe5b60200201510260178681548110151561096d57fe5b906000526020600020900154600b8781548110151561098857fe5b60009182526020909120015403608085015102608086015160178054899081106109ae57fe5b9060005260206000209001540201016017868154811015156109cc57fe5b600091825260209091200155600190940193610560565b5050505050565b601b5481565b60005b600a811015610cce57600019601982815481101515610a0e57fe5b6000918252602090912001556123284244604051918252602082015260409081019051908190039020811515610a4057fe5b076103e801600d82815481101515610a5457fe5b60009182526020909120015560324244604051918252602082015260409081019051908190039020811515610a8557fe5b07603201600e82815481101515610a9857fe5b60009182526020909120015560284244604051918252602082015260409081019051908190039020811515610ac957fe5b07601401600f82815481101515610adc57fe5b60009182526020909120015560284244604051918252602082015260409081019051908190039020811515610b0d57fe5b07600a01601082815481101515610b2057fe5b600091825260209091200155601e4244604051918252602082015260409081019051908190039020811515610b5157fe5b07601e01601182815481101515610b6457fe5b6000918252602090912001556103e76107ce4244604051918252602082015260409081019051908190039020811515610b9957fe5b0703601382815481101515610baa57fe5b6000918252602090912001556005600a4244604051918252602082015260409081019051908190039020811515610bdd57fe5b0703601482815481101515610bee57fe5b600091825260209091200155600460084244604051918252602082015260409081019051908190039020811515610c2157fe5b0703601582815481101515610c3257fe5b600091825260209091200155600460084244604051918252602082015260409081019051908190039020811515610c6557fe5b0703601682815481101515610c7657fe5b600091825260209091200155600360064244604051918252602082015260409081019051908190039020811515610ca957fe5b0703601782815481101515610cba57fe5b6000918252602090912001556001016109f3565b6104ee6114d6565b6000806000601a5460001415610ebd57610cee6109f0565b601b54600680546000908110610d0057fe5b600091825260209091200155601b54600d80549091908110610d1e57fe5b90600052602060002090015460066001815481101515610d3a57fe5b600091825260209091200155601b54600e80549091908110610d5857fe5b90600052602060002090015460066002815481101515610d7457fe5b600091825260209091200155601b54600f80549091908110610d9257fe5b90600052602060002090015460066003815481101515610dae57fe5b600091825260209091200155601b54601080549091908110610dcc57fe5b90600052602060002090015460066004815481101515610de857fe5b600091825260209091200155601b54601180549091908110610e0657fe5b90600052602060002090015460066005815481101515610e2257fe5b6000918252602090912001557fde64c487a92c60772418d9df1269ff8c134b69c5fe6afbc2db898fa0dc23c2246006604051602080825282549082018190528190604082019084908015610e9557602002820191906000526020600020905b815481526020019060010190808311610e81575b50509250505060405180910390a1601b80546001908101909155601a805490910190556112eb565b601e601a5410156112eb57601b54600a141561112c5760009250600091505b600a821015610f10576019805483908110610ef357fe5b906000526020600020900154830192508180600101925050610edc565b82600a141561112757610f21610251565b610f29610540565b610f3161130e565b506000601b819055601a805460010190555b600a811015610f71576000601982815481101515610f5d57fe5b600091825260209091200155600101610f43565b601b54600680546000908110610f8357fe5b600091825260209091200155601b54600d80549091908110610fa157fe5b90600052602060002090015460066001815481101515610fbd57fe5b600091825260209091200155601b54600e80549091908110610fdb57fe5b90600052602060002090015460066002815481101515610ff757fe5b600091825260209091200155601b54600f8054909190811061101557fe5b9060005260206000209001546006600381548110151561103157fe5b600091825260209091200155601b5460108054909190811061104f57fe5b9060005260206000209001546006600481548110151561106b57fe5b600091825260209091200155601b5460118054909190811061108957fe5b906000526020600020900154600660058154811015156110a557fe5b6000918252602090912001557fde64c487a92c60772418d9df1269ff8c134b69c5fe6afbc2db898fa0dc23c224600660405160208082528254908201819052819060408201908490801561111857602002820191906000526020600020905b815481526020019060010190808311611104575b50509250505060405180910390a15b6112eb565b601b5460068054600090811061113e57fe5b600091825260209091200155601b54600d8054909190811061115c57fe5b9060005260206000209001546006600181548110151561117857fe5b600091825260209091200155601b54600e8054909190811061119657fe5b906000526020600020900154600660028154811015156111b257fe5b600091825260209091200155601b54600f805490919081106111d057fe5b906000526020600020900154600660038154811015156111ec57fe5b600091825260209091200155601b5460108054909190811061120a57fe5b9060005260206000209001546006600481548110151561122657fe5b600091825260209091200155601b5460118054909190811061124457fe5b9060005260206000209001546006600581548110151561126057fe5b6000918252602090912001557fde64c487a92c60772418d9df1269ff8c134b69c5fe6afbc2db898fa0dc23c22460066040516020808252825490820181905281906040820190849080156112d357602002820191906000526020600020905b8154815260200190600101908083116112bf575b50509250505060405180910390a1601b805460010190555b505050565b60015481565b60025481565b60035481565b601a5481565b60005481565b60005b600a8110156104ee57601380548290811061132857fe5b906000526020600020900154600d8281548110151561134357fe5b90600052602060002090015401600d8281548110151561135f57fe5b600091825260209091200155601480548290811061137957fe5b906000526020600020900154600e8281548110151561139457fe5b90600052602060002090015401600e828154811015156113b057fe5b60009182526020909120015560158054829081106113ca57fe5b906000526020600020900154600f828154811015156113e557fe5b90600052602060002090015401600f8281548110151561140157fe5b600091825260209091200155601680548290811061141b57fe5b90600052602060002090015460108281548110151561143657fe5b9060005260206000209001540160108281548110151561145257fe5b600091825260209091200155601780548290811061146c57fe5b90600052602060002090015460118281548110151561148757fe5b906000526020600020900154016011828154811015156114a357fe5b600091825260209091200155600101611311565b60068054829081106114c557fe5b600091825260209091200154905081565b60005b600a8110156104ee57612710600d828154811015156114f457fe5b906000526020600020900154131561152957612710600d8281548110151561151857fe5b60009182526020909120015561156c565b6103e8600d8281548110151561153b57fe5b906000526020600020900154121561156c576103e8600d8281548110151561155f57fe5b6000918252602090912001555b6064600e8281548110151561157d57fe5b90600052602060002090015413156115b1576064600e828154811015156115a057fe5b6000918252602090912001556115f2565b6032600e828154811015156115c257fe5b90600052602060002090015412156115f2576032600e828154811015156115e557fe5b6000918252602090912001555b603c600f8281548110151561160357fe5b906000526020600020900154131561163757603c600f8281548110151561162657fe5b600091825260209091200155611678565b6014600f8281548110151561164857fe5b9060005260206000209001541215611678576014600f8281548110151561166b57fe5b6000918252602090912001555b603260108281548110151561168957fe5b90600052602060002090015413156116bd5760326010828154811015156116ac57fe5b6000918252602090912001556116fe565b600a6010828154811015156116ce57fe5b90600052602060002090015412156116fe57600a6010828154811015156116f157fe5b6000918252602090912001555b603c60118281548110151561170f57fe5b906000526020600020900154131561174357603c60118281548110151561173257fe5b600091825260209091200155611784565b601e60118281548110151561175457fe5b906000526020600020900154121561178457601e60118281548110151561177757fe5b6000918252602090912001555b6001016114d9565b60a06040519081016040526005815b600081526020019060019003908161179b57905050905600a165627a7a723058202e463df9be1cb2060d90f748411878ece9bd5457c4d7bdfb0b85a08716a516630029"
    with open('PSO_abi.json') as f:
        abi = json.load(f)
    # initialize the contract
    HP = w3.eth.contract(abi=abi, bytecode=bytecode)
    tx_hash = HP.constructor().transact()

    # Wait for the transaction to be mined, and get the transaction receipt
    tx_receipt = w3.eth.waitForTransactionReceipt(tx_hash, timeout=600)

    print('Contract Address : ', tx_receipt.contractAddress)
    # print('Contract ABI     : ', abi)

    addr = tx_receipt.contractAddress
    hp = w3.eth.contract(address=addr, abi=abi)

    with open('PSO_SINC.txt', 'w') as f:
        f.write(str(addr) + '\n')

    with open('PSO_abi.json', 'w') as f:
        json.dump(abi, f)